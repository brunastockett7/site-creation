<main class="container">
  <h1><%= title %></h1>

  <%
    // errors is an object map from validators.js
    function err(field) {
      return (errors && typeof errors === "object") ? errors[field] : null;
    }
  %>

  <p>Only letters and numbers. No spaces or special characters.</p>

  <form id="add-classification-form" method="post" action="/inv/add-classification" novalidate>
    <label for="classification_name">Classification Name</label>
    <input
      id="classification_name"
      name="classification_name"
      type="text"
      pattern="[A-Za-z0-9]{3,30}"
      minlength="3"
      maxlength="30"
      required
      title="3â€“30 letters/numbers, no spaces"
      aria-describedby="classificationHelp"
      value="<%= values?.classification_name || '' %>"
    />
    <% if (err('classification_name')) { %>
      <span class="error" id="classificationHelp"><%= err('classification_name') %></span>
    <% } %>

    <button type="submit">Save</button>
  </form>
</main>

<script>
  // Trigger native browser validation UI if invalid (frontend checklist)
  document.getElementById('add-classification-form').addEventListener('submit', (e) => {
    if (!e.target.checkValidity()) {
      e.preventDefault();
      e.target.reportValidity();
    }
  });
</script>
